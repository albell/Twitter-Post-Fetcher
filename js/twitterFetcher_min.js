/*********************************************************************
*  #### Twitter Post Fetcher v13.0 ####
*  Coded by Jason Mayes 2015. A present to all the developers out there.
*  www.jasonmayes.com
*  Please keep this disclaimer with my code if you use it. Thanks. :-)
*  Got feedback or questions, ask here:
*  http://www.jasonmayes.com/projects/twitterApi/
*  Github: https://github.com/jasonmayes/Twitter-Post-Fetcher
*  Updates will be posted to this site.
*********************************************************************/

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():t()}(this,function(){function e(e){if(null===w){for(var t=e.length,s=0,a=document.getElementById(i),n='<ul class="'+l+'__tweet-list">';t>s;)n+='<li class="'+l+'__tweet">'+e[s]+"</li>",s++;n+="</ul>",a.innerHTML=n}else w(e)}function t(e){return e.replace(/<b[^>]*>(.*?)<\/b>/gi,function(e,t){return t}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function s(e){for(var t=e.getElementsByTagName("a"),s=t.length-1;s>=0;s--)t[s].setAttribute("target","_blank")}function a(e,t){for(var s=[],a=new RegExp("(^| )"+t+"( |$)"),n=e.getElementsByTagName("*"),i=0,l=n.length;l>i;i++)a.test(n[i].className)&&s.push(n[i]);return s}function n(e){if(void 0!==e){var t=e.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0];return decodeURIComponent(t).split('"')[1]}}var i="",l="",r=20,o=!0,c=[],d=!1,p=!0,m=!0,u=null,h=!0,_=!0,w=null,g=!0,f=!1,v=!0,b="en",y={fetch:function(e){if(void 0===e.baseClassName&&(e.baseClassName=e.domId),void 0===e.maxTweets&&(e.maxTweets=20),void 0===e.enableLinks&&(e.enableLinks=!0),void 0===e.showUser&&(e.showUser=!0),void 0===e.showTime&&(e.showTime=!0),void 0===e.dateFunction&&(e.dateFunction="default"),void 0===e.showRetweet&&(e.showRetweet=!0),void 0===e.customCallback&&(e.customCallback=null),void 0===e.showInteraction&&(e.showInteraction=!0),void 0===e.showImages&&(e.showImages=!1),void 0===e.linksInNewWindow&&(e.linksInNewWindow=!0),d)c.push(e);else{d=!0,l=e.baseClassName,i=e.domId,r=e.maxTweets,o=e.enableLinks,m=e.showUser,p=e.showTime,_=e.showRetweet,u=e.dateFunction,w=e.customCallback,g=e.showInteraction,f=e.showImages,v=e.linksInNewWindow;var t=document.createElement("script");t.type="text/javascript",t.src="//cdn.syndication.twimg.com/widgets/timelines/"+e.id+"?&lang="+(e.lang||b)+"&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(t)}},callback:function(i){var w=document.createElement("div");w.innerHTML=i.body,"undefined"==typeof w.getElementsByClassName&&(h=!1);var b=[],x=[],T=[],C=[],N=[],k=[],E=0,I;if(h)for(I=w.getElementsByClassName("tweet");E<I.length;)N.push(I[E].getElementsByClassName("retweet-credit").length>0?!0:!1),(!N[E]||N[E]&&_)&&(b.push(I[E].getElementsByClassName("e-entry-title")[0]),k.push(I[E].getAttribute("data-tweet-id")),x.push(I[E].getElementsByClassName("p-author")[0]),T.push(I[E].getElementsByClassName("dt-updated")[0]),C.push(void 0!==I[E].getElementsByClassName("inline-media")[0]?I[E].getElementsByClassName("inline-media")[0]:void 0)),E++;else for(I=a(w,"tweet");E<I.length;)b.push(a(I[E],"e-entry-title")[0]),k.push(I[E].getAttribute("data-tweet-id")),x.push(a(I[E],"p-author")[0]),T.push(a(I[E],"dt-updated")[0]),C.push(void 0!==a(I[E],"inline-media")[0]?a(I[E],"inline-media")[0]:void 0),N.push(a(I[E],"retweet-credit").length>0?!0:!1),E++;b.length>r&&(b.splice(r,b.length-r),x.splice(r,x.length-r),T.splice(r,T.length-r),N.splice(r,N.length-r),C.splice(r,C.length-r));var B=[];E=b.length;for(var A=0;E>A;){if("string"!=typeof u){var L=T[A].getAttribute("datetime"),R=new Date(T[A].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),F=u(R,L);if(T[A].setAttribute("aria-label",F),b[A].innerText)if(h)T[A].innerText=F;else{var M=document.createElement("p"),H=document.createTextNode(F);M.appendChild(H),M.setAttribute("aria-label",F),T[A]=M}else T[A].textContent=F}var U="";o?(v&&(s(b[A]),m&&s(x[A])),m&&(U+='<div class="'+l+'__user">'+t(x[A].innerHTML)+"</div>"),U+='<p class="'+l+'__tweet-text">'+t(b[A].innerHTML)+"</p>",p&&(U+='<p class="'+l+'__time-posted">'+T[A].getAttribute("aria-label")+"</p>")):b[A].innerText?(m&&(U+='<p class="'+l+'__user">'+x[A].innerText+"</p>"),U+='<p class="'+l+'__tweet-text">'+b[A].innerText+"</p>",p&&(U+='<p class="'+l+'__time-posted">'+T[A].innerText+"</p>")):(m&&(U+='<p class="'+l+'__user">'+x[A].textContent+"</p>"),U+='<p class="'+l+'__tweet-text">'+b[A].textContent+"</p>",p&&(U+='<p class="'+l+'__time-posted">'+T[A].textContent+"</p>")),f&&void 0!==C[A]&&(U+='<div class="'+l+'__media"><img class="'+l+'__media__image" src="'+n(C[A])+'" alt="Image from tweet" /></div>'),g&&(U+='<div class="'+l+'__interact"><a class="'+l+'__reply"href="https://twitter.com/intent/tweet?in_reply_to='+k[A]+'"'+(v?' target="_blank">':">")+'<span aria-hidden="true" class="'+l+'__reply-icon"></span><span class="'+l+'__screen-reader-text">Reply</span></a><a class="'+l+'__retweet" href="https://twitter.com/intent/retweet?tweet_id='+k[A]+'"'+(v?' target="_blank">':">")+'<span aria-hidden="true" class="'+l+'__retweet-icon"></span><span class="'+l+'__screen-reader-text">Retweet</span></a><a class="'+l+'__favorite" href="https://twitter.com/intent/favorite?tweet_id='+k[A]+'"'+(v?' target="_blank">':">")+'<span aria-hidden="true" class="'+l+'__favorite-icon"></span><span class="'+l+'__screen-reader-text">Favorite</span></a></div>'),B.push(U),A++}e(B),d=!1,c.length>0&&(y.fetch(c[0]),c.splice(0,1))}};return window.twitterFetcher=y,y});